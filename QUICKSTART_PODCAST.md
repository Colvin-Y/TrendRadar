# å¿«é€Ÿå¼€å§‹ - æ’­å®¢åŠŸèƒ½

## ğŸš€ ä¸€é”®è¿è¡Œï¼ˆæ¨èï¼‰

```bash
# è®¾ç½® API Key
export OPENROUTER_API_KEY="your-api-key"

# ä¸€é”®è¿è¡Œï¼ˆåŒ…å«çˆ¬è™«ã€æ’­å®¢ç”Ÿæˆã€HTMLé›†æˆï¼‰
python run_with_podcast.py
```

å°±è¿™ä¹ˆç®€å•ï¼æ‰“å¼€ `index.html` å³å¯çœ‹åˆ°å¸¦éŸ³é¢‘æ’­æ”¾å™¨çš„æ–°é—»æŠ¥å‘Šã€‚

---

## ğŸ“‹ åˆ†æ­¥è¿è¡Œï¼ˆäº†è§£åŸç†ï¼‰

```bash
# 1. è®¾ç½® API Key
export OPENROUTER_API_KEY="your-api-key"

# 2. å®‰è£… TTS ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œéœ€è¦ï¼‰
pip install edge-tts

# 3. è¿è¡Œçˆ¬è™«ï¼ˆç”Ÿæˆæ–°é—»æ•°æ®ï¼‰
python main.py

# 4. ç”Ÿæˆæ’­å®¢ï¼ˆç”ŸæˆéŸ³é¢‘æ–‡ä»¶ï¼‰
python generate_podcast_auto.py

# 5. é‡æ–°ç”Ÿæˆ HTMLï¼ˆé›†æˆéŸ³é¢‘æ’­æ”¾å™¨ï¼‰â­ é‡è¦ï¼
python main.py

```

**å…³é”®**ï¼šç¬¬5æ­¥ï¼ˆé‡æ–°è¿è¡Œ main.pyï¼‰æ˜¯å¿…éœ€çš„ï¼è¿™ä¸€æ­¥ä¼šæ£€æµ‹éŸ³é¢‘æ–‡ä»¶å¹¶å°†æ’­æ”¾å™¨é›†æˆåˆ° HTML ä¸­ã€‚

æ‰“å¼€ç”Ÿæˆçš„ `index.html`ï¼Œä½ ä¼šåœ¨é¡µé¢é¡¶éƒ¨çœ‹åˆ°æ’­å®¢æ’­æ”¾å™¨ï¼

## â“ ä¸ºä»€ä¹ˆéœ€è¦è¿è¡Œä¸¤æ¬¡ main.pyï¼Ÿ

ç¬¬ä¸€æ¬¡è¿è¡Œï¼šç”Ÿæˆæ–°é—»æ•°æ®ï¼ˆtxt å’Œ htmlï¼‰
          â†“
ç”Ÿæˆæ’­å®¢ï¼šæ ¹æ® txt ç”ŸæˆéŸ³é¢‘æ–‡ä»¶ï¼ˆmp3ï¼‰
          â†“
ç¬¬äºŒæ¬¡è¿è¡Œï¼šæ£€æµ‹åˆ°éŸ³é¢‘æ–‡ä»¶ï¼Œåœ¨ HTML ä¸­æ·»åŠ æ’­æ”¾å™¨ â­

**åŸç†**ï¼šHTML ç”Ÿæˆæ—¶ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨å¯¹åº”çš„éŸ³é¢‘æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨å°±è‡ªåŠ¨æ·»åŠ æ’­æ”¾å™¨ã€‚

## æ•ˆæœé¢„è§ˆ

ç”Ÿæˆçš„ HTML é¡µé¢é¡¶éƒ¨ä¼šå‡ºç°è¿™æ ·çš„æ’­æ”¾å™¨ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         çƒ­ç‚¹æ–°é—»åˆ†æ                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ§ æ’­å®¢éŸ³é¢‘                            â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 00:00 / 03:45  â¯  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  æŠ¥å‘Šç±»å‹: å½“æ—¥æ±‡æ€»  æ–°é—»æ€»æ•°: 150 æ¡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ–‡ä»¶è¯´æ˜

### è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶

```
output/2025å¹´11æœˆ25æ—¥/
â”œâ”€â”€ txt/
â”‚   â””â”€â”€ 21æ—¶41åˆ†.txt             # æ–°é—»åŸå§‹æ•°æ®
â”œâ”€â”€ html/
â”‚   â””â”€â”€ 21æ—¶41åˆ†.html            # å¸¦æ’­æ”¾å™¨çš„HTML
â””â”€â”€ audio/
    â”œâ”€â”€ 21æ—¶41åˆ†.mp3             # æ’­å®¢éŸ³é¢‘ â­
    â””â”€â”€ 21æ—¶41åˆ†_script.txt      # AIç”Ÿæˆçš„è„šæœ¬
```

### è„šæœ¬æ–‡ä»¶

- `generate_podcast.py` - äº¤äº’å¼ç”Ÿæˆï¼ˆæœ¬åœ°å¼€å‘ç”¨ï¼‰
- `generate_podcast_auto.py` - è‡ªåŠ¨åŒ–ç”Ÿæˆï¼ˆCI/CDç”¨ï¼‰
- `test_audio_integration.py` - æµ‹è¯•è„šæœ¬

## å¸¸è§é—®é¢˜

### Q1: æ²¡æœ‰çœ‹åˆ°æ’­æ”¾å™¨ï¼Ÿ

**A:** ç¡®ä¿éŸ³é¢‘æ–‡ä»¶å­˜åœ¨ä¸”æ–‡ä»¶ååŒ¹é…ï¼š
```bash
ls -lh output/$(date +%Yå¹´%mæœˆ%dæ—¥)/audio/
```

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¿è¡Œï¼š
```bash
python generate_podcast_auto.py
```

### Q2: æ’­æ”¾å™¨æ˜¾ç¤ºä½†æ— æ³•æ’­æ”¾ï¼Ÿ

**A:** éŸ³é¢‘æ–‡ä»¶å¯èƒ½æ˜¯ç©ºçš„ã€‚é‡æ–°ç”ŸæˆéŸ³é¢‘ï¼š
```bash
export OPENROUTER_API_KEY="your-key"
python generate_podcast_auto.py
```

### Q3: AI è„šæœ¬ç”Ÿæˆå¤±è´¥ï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. API Key æ˜¯å¦æ­£ç¡®
2. ç½‘ç»œæ˜¯å¦æ­£å¸¸
3. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼š
```bash
python generate_podcast_auto.py 2>&1 | grep "ERROR"
```

### Q4: æƒ³è¦æ›´æ”¹è¯­éŸ³ï¼Ÿ

**A:** ç¼–è¾‘ `generate_podcast_auto.py` ç¬¬ 221 è¡Œï¼š
```python
# å¥³å£°æ¸©æŸ”ç‰ˆ
communicate = edge_tts.Communicate(script, "zh-CN-XiaoxiaoNeural")

# ç”·å£°æ²‰ç¨³ç‰ˆ
communicate = edge_tts.Communicate(script, "zh-CN-YunxiNeural")

# ç”·å£°æ’­æŠ¥ç‰ˆï¼ˆé»˜è®¤ï¼‰
communicate = edge_tts.Communicate(script, "zh-CN-YunyangNeural")
```

## GitHub Actions é…ç½®

åœ¨ `.github/workflows/update.yml` ä¸­æ·»åŠ ï¼š

```yaml
      # ç°æœ‰çš„çˆ¬è™«æ­¥éª¤
      - name: Run crawler
        run: python main.py

      # ğŸ™ï¸ æ–°å¢ï¼šç”Ÿæˆæ’­å®¢
      - name: Generate podcast
        env:
          OPENROUTER_API_KEY: ${{ secrets.OPENROUTER_API_KEY }}
        run: |
          pip install edge-tts
          python generate_podcast_auto.py || echo "Podcast generation failed, continuing..."

      # ğŸ™ï¸ æ–°å¢ï¼šé‡æ–°ç”Ÿæˆå¸¦éŸ³é¢‘çš„HTML
      - name: Regenerate HTML
        run: python main.py

      # æäº¤æ›´æ”¹
      - name: Commit changes
        run: |
          git add output/ index.html
          git commit -m "Auto update with podcast"
          git push
```

åˆ«å¿˜äº†åœ¨ GitHub Secrets ä¸­æ·»åŠ  `OPENROUTER_API_KEY`ï¼

## é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ’­å®¢é£æ ¼

ç¼–è¾‘ `generate_podcast_auto.py`ï¼Œä¿®æ”¹ promptï¼š

```python
prompt = f"""ä½ æ˜¯ä¸€ä½ã€å¹½é»˜é£è¶£ã€‘çš„æ’­å®¢ä¸»æ’­...  # æ”¹æˆä½ æƒ³è¦çš„é£æ ¼
è¦æ±‚ï¼š
1. è¯­è¨€é£æ ¼ã€è½»æ¾æç¬‘ã€‘                      # è‡ªå®šä¹‰è¯­è¨€é£æ ¼
2. ä½¿ç”¨ã€ç½‘ç»œæµè¡Œè¯­ã€‘                        # æ·»åŠ ç‰¹è‰²è¦æ±‚
...
```

### æ§åˆ¶æ’­å®¢é•¿åº¦

è°ƒæ•´ `max_tokens` å‚æ•°ï¼š

```python
"max_tokens": 2000,  # å¢åŠ  â†’ æ›´é•¿çš„æ’­å®¢
```

### æ‰¹é‡ç”Ÿæˆå†å²æ’­å®¢

```bash
# ä¸ºä»Šå¤©æ‰€æœ‰çš„æ–°é—»ç”Ÿæˆæ’­å®¢
for txt_file in output/$(date +%Yå¹´%mæœˆ%dæ—¥)/txt/*.txt; do
    python generate_podcast_auto.py
    python main.py
done
```

## è´¹ç”¨è¯´æ˜

- OpenRouter (DeepSeek V3): ~$0.001/æ¬¡
- Edge TTS: å®Œå…¨å…è´¹
- æ€»è®¡: **~$0.001/æ¬¡**ï¼ˆçº¦0.007å…ƒäººæ°‘å¸ï¼‰

æ¯å¤©è¿è¡Œ12æ¬¡ï¼Œæœˆè´¹ç”¨çº¦ **$0.36**ï¼ˆçº¦2.5å…ƒäººæ°‘å¸ï¼‰

## æµ‹è¯•éªŒè¯

è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯é›†æˆï¼š

```bash
python test_audio_integration.py
```

åº”è¯¥çœ‹åˆ°ï¼š
```
ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼éŸ³é¢‘æ’­æ”¾å™¨é›†æˆæˆåŠŸï¼
```

## ä¸‹ä¸€æ­¥

- [ ] è‡ªå®šä¹‰æ’­å®¢é£æ ¼
- [ ] é…ç½® GitHub Actions
- [ ] æ·»åŠ èƒŒæ™¯éŸ³ä¹
- [ ] åˆ†äº«ç»™æœ‹å‹ï¼

## éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š
- [README_PODCAST.md](./README_PODCAST.md) - è¯¦ç»†æ–‡æ¡£
- [INTEGRATION_SUMMARY.md](./INTEGRATION_SUMMARY.md) - é›†æˆæ€»ç»“

## äº«å—ä½ çš„æ’­å®¢æ–°é—»ï¼ğŸ‰

ç°åœ¨æ¯æ¬¡ç”Ÿæˆæ–°é—»æŠ¥å‘Šæ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„æ’­å®¢éŸ³é¢‘ï¼Œè®©ä½ å¯ä»¥ä¸€è¾¹åšäº‹ä¸€è¾¹å¬æ–°é—»ï¼
