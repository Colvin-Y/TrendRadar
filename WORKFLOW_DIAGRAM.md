# TrendRadar æ’­å®¢é›†æˆå·¥ä½œæµç¨‹

## ğŸ”„ å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤1: è¿è¡Œçˆ¬è™«                                              â”‚
â”‚  $ python main.py                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ç”Ÿæˆæ–‡ä»¶:           â”‚
            â”‚  â”œâ”€ txt/20æ—¶09åˆ†.txt â”‚
            â”‚  â””â”€ html/20æ—¶09åˆ†.htmlâ”‚
            â”‚     (æš‚æ— éŸ³é¢‘æ’­æ”¾å™¨)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤2: ç”Ÿæˆæ’­å®¢                                              â”‚
â”‚  $ python generate_podcast_auto.py                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  è¯»å– txt/20æ—¶09åˆ†.txt       â”‚
            â”‚         â†“                   â”‚
            â”‚  è°ƒç”¨ DeepSeek V3 ç”Ÿæˆè„šæœ¬   â”‚
            â”‚         â†“                   â”‚
            â”‚  ä½¿ç”¨ Edge TTS ç”ŸæˆéŸ³é¢‘      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ç”Ÿæˆæ–‡ä»¶:                   â”‚
            â”‚  â”œâ”€ audio/20æ—¶09åˆ†.mp3      â”‚
            â”‚  â””â”€ audio/20æ—¶09åˆ†_script.txtâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤3: é‡æ–°ç”Ÿæˆ HTML (å…³é”®ï¼)                                â”‚
â”‚  $ python main.py                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ˜¯å¦å­˜åœ¨:       â”‚
            â”‚  output/2025å¹´11æœˆ25æ—¥/      â”‚
            â”‚    audio/20æ—¶09åˆ†.mp3       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚           â”‚
              å­˜åœ¨ âœ…           â”‚ ä¸å­˜åœ¨ âŒ
                    â”‚           â”‚
                    â–¼           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ æ·»åŠ éŸ³é¢‘æ’­æ”¾å™¨ â”‚  â”‚ ä¸æ·»åŠ æ’­æ”¾å™¨  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ç”Ÿæˆæ–°çš„ HTML:          â”‚
    â”‚  html/20æ—¶09åˆ†.html     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚ ğŸ§ æ’­å®¢éŸ³é¢‘          â”‚â”‚
    â”‚  â”‚ [========] â–¶ï¸        â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å¤åˆ¶åˆ°æ ¹ç›®å½•:           â”‚
    â”‚  index.html             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
            âœ… å®Œæˆï¼
```

## ğŸ“Š æ–‡ä»¶æ—¶é—´çº¿

```
æ—¶é—´: 20:09
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ç¬¬ä¸€æ¬¡ python main.py
    â†“
output/2025å¹´11æœˆ25æ—¥/
    â”œâ”€ txt/20æ—¶09åˆ†.txt         â† ç”Ÿæˆ
    â””â”€ html/20æ—¶09åˆ†.html       â† ç”Ÿæˆ (æ— éŸ³é¢‘)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

python generate_podcast_auto.py
    â†“
output/2025å¹´11æœˆ25æ—¥/
    â””â”€ audio/
        â”œâ”€ 20æ—¶09åˆ†.mp3         â† ç”Ÿæˆ â­
        â””â”€ 20æ—¶09åˆ†_script.txt  â† ç”Ÿæˆ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ—¶é—´: 20:11 (å¯èƒ½å·²ç»è¿‡äº†å‡ åˆ†é’Ÿ)

ç¬¬äºŒæ¬¡ python main.py
    â†“
1. æ£€æŸ¥: audio/20æ—¶09åˆ†.mp3 å­˜åœ¨? âœ…
2. ç”Ÿæˆ: html/20æ—¶09åˆ†.html (å¸¦æ’­æ”¾å™¨) â† æ›´æ–°
3. å¤åˆ¶: index.html â† æ›´æ–°

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

## ğŸ” å…³é”®åŒ¹é…æœºåˆ¶

```python
# åœ¨ generate_html_report() å‡½æ•°ä¸­

# 1. HTML æ–‡ä»¶å
filename = "20æ—¶09åˆ†.html"

# 2. æå–æ—¶é—´æ ‡è¯†
time_filename = filename.replace(".html", "")  # "20æ—¶09åˆ†"

# 3. æŸ¥æ‰¾å¯¹åº”éŸ³é¢‘
audio_path = f"output/2025å¹´11æœˆ25æ—¥/audio/{time_filename}.mp3"
                                              # ^^^^^^^^
                                              # ä¸ HTML æ–‡ä»¶ååŒ¹é…ï¼

# 4. å¦‚æœå­˜åœ¨ï¼Œæ·»åŠ åˆ° HTML
if audio_path.exists():
    audio_file = f"../audio/{time_filename}.mp3"
    # ä¼ é€’ç»™ render_html_content()
```

## ğŸ¯ ä¸€é”®è¿è¡Œæ–¹æ¡ˆ

ä¸ºäº†ç®€åŒ–æµç¨‹ï¼Œæä¾›äº† `run_with_podcast.py`ï¼š

```python
# è‡ªåŠ¨æ‰§è¡Œä¸‰ä¸ªæ­¥éª¤
def main():
    run_command("æ­¥éª¤ 1: è¿è¡Œçˆ¬è™«", "python main.py")
    run_command("æ­¥éª¤ 2: ç”Ÿæˆæ’­å®¢", "python generate_podcast_auto.py")
    run_command("æ­¥éª¤ 3: é‡æ–°ç”ŸæˆHTML", "python main.py")
```

ä½¿ç”¨æ–¹æ³•ï¼š
```bash
export OPENROUTER_API_KEY="your-key"
python run_with_podcast.py
```

## âš™ï¸ GitHub Actions å·¥ä½œæµ

```yaml
name: Generate News with Podcast

jobs:
  generate:
    steps:
      # æ­¥éª¤1: çˆ¬å–æ–°é—»
      - name: Crawl news
        run: python main.py

      # æ­¥éª¤2: ç”Ÿæˆæ’­å®¢
      - name: Generate podcast
        env:
          OPENROUTER_API_KEY: ${{ secrets.OPENROUTER_API_KEY }}
        run: |
          pip install edge-tts
          python generate_podcast_auto.py || echo "Podcast failed"

      # æ­¥éª¤3: é‡æ–°ç”ŸæˆHTMLï¼ˆé›†æˆéŸ³é¢‘ï¼‰
      - name: Regenerate HTML
        run: python main.py

      # æäº¤æ‰€æœ‰æ›´æ”¹
      - name: Commit changes
        run: |
          git add output/ index.html
          git commit -m "Auto update with podcast"
          git push
```

## ğŸ”„ å¾ªç¯è¿è¡Œç¤ºä¾‹

å¦‚æœä½ æƒ³å®šæ—¶è¿è¡Œï¼ˆæ¯”å¦‚æ¯2å°æ—¶ï¼‰ï¼š

```bash
# crontab -e
0 */2 * * * cd /path/to/TrendRadar && python run_with_podcast.py
```

æˆ–åœ¨ GitHub Actions ä¸­ï¼š

```yaml
on:
  schedule:
    - cron: '0 */2 * * *'  # æ¯2å°æ—¶è¿è¡Œ
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜1: è¿è¡Œäº† generate_podcast_auto.pyï¼Œä½† HTML ä¸­æ²¡æœ‰æ’­æ”¾å™¨

**åŸå› **ï¼šæ²¡æœ‰é‡æ–°è¿è¡Œ main.py

**è§£å†³**ï¼š
```bash
python main.py  # é‡æ–°ç”Ÿæˆ HTML
```

### é—®é¢˜2: æ’­æ”¾å™¨æ˜¾ç¤ºä½†ç‚¹å‡»æ— æ³•æ’­æ”¾

**åŸå› **ï¼šéŸ³é¢‘æ–‡ä»¶æ˜¯ç©ºçš„æˆ–æŸå

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶
ls -lh output/$(date +%Yå¹´%mæœˆ%dæ—¥)/audio/*.mp3

# é‡æ–°ç”ŸæˆéŸ³é¢‘
python generate_podcast_auto.py
```

### é—®é¢˜3: æ—¶é—´ä¸åŒ¹é…

**ç¤ºä¾‹**ï¼šHTML æ˜¯ 20æ—¶09åˆ†.htmlï¼Œä½†éŸ³é¢‘æ˜¯ 20æ—¶10åˆ†.mp3

**åŸå› **ï¼šè·¨åˆ†é’Ÿç”Ÿæˆ

**è§£å†³**ï¼šè¿™ä¸åº”è¯¥å‘ç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»ä¿®å¤äº†è¿™ä¸ªbugã€‚å¦‚æœä»ç„¶å‡ºç°ï¼š
```bash
# æ‰‹åŠ¨é‡å‘½åéŸ³é¢‘æ–‡ä»¶
mv output/æ—¥æœŸ/audio/20æ—¶10åˆ†.mp3 output/æ—¥æœŸ/audio/20æ—¶09åˆ†.mp3
python main.py  # é‡æ–°ç”Ÿæˆ
```

## ğŸ“ æœ€ä½³å®è·µ

### æœ¬åœ°å¼€å‘
```bash
# ä½¿ç”¨ä¸€é”®è„šæœ¬
python run_with_podcast.py
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆGitHub Actionsï¼‰
```bash
# åˆ†æ­¥è¿è¡Œï¼Œä¾¿äºè°ƒè¯•
python main.py
python generate_podcast_auto.py || true  # å…è®¸å¤±è´¥
python main.py
```

### æ‰‹åŠ¨è°ƒè¯•
```bash
# 1. çˆ¬å–æ–°é—»
python main.py

# 2. ç”Ÿæˆæ’­å®¢ï¼ˆæŸ¥çœ‹è¯¦ç»†è¾“å‡ºï¼‰
python generate_podcast_auto.py

# 3. æ£€æŸ¥æ–‡ä»¶
ls -lh output/$(date +%Yå¹´%mæœˆ%dæ—¥)/audio/

# 4. é‡æ–°ç”ŸæˆHTML
python main.py

# 5. éªŒè¯
python test_audio_integration.py
```

## ğŸ’¡ å°æŠ€å·§

### æ‰¹é‡ä¸ºå†å²æ–°é—»ç”Ÿæˆæ’­å®¢

```bash
#!/bin/bash
for txt_file in output/2025å¹´11æœˆ25æ—¥/txt/*.txt; do
    filename=$(basename "$txt_file" .txt)
    echo "å¤„ç†: $filename"

    # åˆ›å»ºä¸´æ—¶ç¬¦å·é“¾æ¥
    ln -sf "$txt_file" "output/2025å¹´11æœˆ25æ—¥/txt/temp.txt"

    # ç”Ÿæˆæ’­å®¢
    python generate_podcast_auto.py

    # æ¸…ç†
    rm "output/2025å¹´11æœˆ25æ—¥/txt/temp.txt"
done
```

### é¢„è§ˆéŸ³é¢‘è„šæœ¬ä¸ç”ŸæˆéŸ³é¢‘

ä¿®æ”¹ `generate_podcast_auto.py`ï¼Œåœ¨ç”ŸæˆéŸ³é¢‘å‰æ·»åŠ ï¼š

```python
print(f"è„šæœ¬é¢„è§ˆ:\n{script}")
input("æŒ‰å›è½¦ç»§ç»­ç”ŸæˆéŸ³é¢‘ï¼Œæˆ– Ctrl+C å–æ¶ˆ...")
```

## ğŸ‰ æ€»ç»“

è®°ä½è¿™ä¸ªå…¬å¼ï¼š

```
çˆ¬å– â†’ ç”ŸæˆéŸ³é¢‘ â†’ é‡æ–°ç”ŸæˆHTML = å®Œæ•´çš„æ’­å®¢æ–°é—»ï¼
```

ä½¿ç”¨ `run_with_podcast.py` ä¸€é”®æå®šæ‰€æœ‰æ­¥éª¤ï¼
